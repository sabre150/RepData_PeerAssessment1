---
title: "Reproducible Research: Peer Assessment 1"
output: 
  html_document:
    keep_md: true
---


## Loading and preprocessing the data

#### Data
- Data was downloaded from the following github repo  
[https://github.com/rdpeng/RepData_PeerAssessment1]
(https://github.com/rdpeng/RepData_PeerAssessment1)
 forked on 11/15/2014.  
 
- The dataset is contained in a .csv file named activity.csv
 
#### Code Book  
 - **Raw Data**
    - **steps:**    The number of steps taken in a 5 minute interval.  
    - **date:**     The date the measurement was taken.  Format: YYYY-MM-DD.  
    - **interval:** 5 minute interval identifier.  This is an integer that 
    represents the time of the beginning of the 5 minute interval.  Format HHMM 
    where HH represents the hour of the day (0-24), MM represents the minutes 
    (0-55).  Leading zeros are dropped.

 - **Processed Data**  
 We will add a date/time column to the raw data.  The processed data
 will have the 3 variables listed above plus the following: 
    - **dateTime;**  A date/time value calculated from the date 
    and interval variables.  Format: POSIXct. 

```{r reaData}
# Load raw data.
dataFile <- "./Data/activity.csv"
rawData <- read.csv(dataFile)

## Preprocess raw data into a data frame called procData by adding a POSIXct dateTime 
procData <- within (rawData, {
    dateTime <- as.POSIXct(sprintf("%s %0.4d", date, interval), format = "%Y-%m-%d %H%M")
})

```
  
  
***
  
  
## What is mean total number of steps taken per day?
#### Historgram of total steps taken per day  
In order to get a histogram of total steps take per day we need a weighted histogram.  
If we take a normal historgram of the date variable we would get count of the number 
of observations per day (i.e. 288).  However if we weight (multiply) each observation 
by the numper of steps taken in that observation we will get a historgram of the 
total steps taken per day.  

```{r histogram1, fig.width = 15}
# Histogram of date weighted by steps.  This gives us a historam of total steps/day.
library(ggplot2)
qplot(date, data = procData, weight = steps) +
    labs(title = "Total Steps per Day", x = "Date", y = "Total Steps") +
    geom_bar(fill = "royalblue") +
    
    # De-clutter the x axis by only showing every 7th date   
    scale_x_discrete(breaks = c("2012-10-01","2012-10-08","2012-10-15","2012-10-22","2012-10-29",
                                "2012-11-05","2012-11-12","2012-11-19","2012-11-26"))
```
#### Mean and median of total steps take per day.  
First we will create a data frame of the daily statistics consisting of:
- **date:** Date of observations.
- **totalSteps**    Total number of steps taken on that date.  
- **meanSteps**    Mean value of steps per time period on that date.  
- **medianSteps**   Median value of steps taken per time period on that date.

```{r dailyStats}
# Calculate total, mean and median number of steps per day.  We can drop NA values.
# Note: median = 0 for most days becasue steps = 0 for > 1/2 of intervals.

library(plyr)
dailyData <- ddply(procData, "date", summarise,
                totalSteps = sum(steps, na.rm = TRUE),
                meanSteps = mean(steps, na.rm = TRUE),
                medianSteps = median(steps, na.rm = TRUE))

```
For the mean value of total steps per day we will take the mean of the totalSteps 
column of the dailyData data frame.  
```{r dailyTotalMean}
# Mean of daily total steps
mean(dailyData$totalSteps, na.rm = TRUE)

```
For the median value of total steps per day we will take the median of the 
totalSteps column of the dailyData data frame.  
```{r dailyTotalMedian}
# Median of daily total steps
median(dailyData$totalSteps, na.rm = TRUE)
```
  
  
***
  
  
## What is the average daily activity pattern?

To look at the average daily activity pattern we are going to take the mean 
value of the steps per interval averaged over all days.  We will put this 
in a data frame called intervalMean.
```{r intrvalMean}
# calculate mean by time interval
require(plyr)
intervalMean <- ddply(procData, "interval", summarise, meanSteps = mean(steps, na.rm = TRUE)) 
```  
   
Now we will plot intervalMean vs. interval:
```{r intervalMeanPlot, fig.width = 15}
# Creat plot of meanSteps ~ interval
require(ggplot2)

ggplot(intervalMean, aes(x = interval, y = meanSteps)) +
    geom_line(color = "royalblue") +
    labs(title = "Average Number of Steps per Time Interval", x = "Interval", y = "Number of Steps")
```
  
Now to find the 5 minute interval which, when averaged across all days, conatins 
the maximum number of steps.  We ill use the max function in R to do this.
```{r maxAvgStepsIterval}
# Find interval with the maximum average number of steps
maxInterval <- intervalMean[intervalMean$meanSteps == max(intervalMean$meanSteps),]
maxInterval
```
This means that, on average, this person takes the most steps during interval 
`r maxInterval$interval` with an average of `r round(maxInterval$meanSteps)` steps.  

***  
  
  
## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?
